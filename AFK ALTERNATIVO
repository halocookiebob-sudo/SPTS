local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Ponto salvo
local savedPoint = nil

-- Criar botão na tela
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

local saveButton = Instance.new("TextButton")
saveButton.Size = UDim2.new(0, 150, 0, 40)
saveButton.Position = UDim2.new(0, 20, 0, 20)
saveButton.Text = "Salvar Local"
saveButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
saveButton.TextColor3 = Color3.new(1, 1, 1)
saveButton.Parent = screenGui

-- Função para teleportar o player
local function tpTo(point)
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		player.Character.HumanoidRootPart.CFrame = point
	end
end

-- Salvar local atual
saveButton.MouseButton1Click:Connect(function()
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		savedPoint = player.Character.HumanoidRootPart.CFrame
		saveButton.Text = "Local Salvo!"
		task.wait(1)
		saveButton.Text = "Salvar Local"
	end
end)

-- Renascer no ponto salvo
player.CharacterAdded:Connect(function(char)
	-- Esperar o HRP aparecer
	local hrp = char:WaitForChild("HumanoidRootPart", 5)
	if savedPoint then
		task.wait(0.2)
		tpTo(savedPoint)
	end
end)

-- Monitorar distância e puxar de volta
RunService.Heartbeat:Connect(function()
	if savedPoint and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		local hrp = player.Character.HumanoidRootPart
		local distance = (hrp.Position - savedPoint.Position).Magnitude

		if distance > 20 then
			tpTo(savedPoint)
		end
	end
end)
